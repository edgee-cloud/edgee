(()=>{var j=Object.defineProperty;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var P=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&P(e,n,t[n]);if(k)for(var n of k(t))T.call(t,n)&&P(e,n,t[n]);return e};var V={eventPath:"/_edgee/event",asThirdPartySdk:!1,methods:["user","track","page"]},s=V;var I=e=>{let t=window.location.search;return new URLSearchParams(t).get(e)},w=()=>{let e=I("_edgeedebug");if(e!==null){if(e==="true")return document.cookie="_edgeedebug=true; path=/",!0;if(e==="false")return document.cookie="_edgeedebug=false; path=/",!1}return!!document.cookie.includes("_edgeedebug=true")},_=(...e)=>{typeof e!="object"&&(e=[e]),console&&typeof console.log=="function"&&w()&&console.log("%cEDGEE","display: inline-block; color: #61d2a3; background: #231A26; padding: 1px 4px; border-radius: 3px;",...e)},p=(...e)=>{typeof e!="object"&&(e=[e]),console&&typeof console.error=="function"&&w()&&console.error("%cEDGEE","display: inline-block; color: #CB134A; background: #231A26; padding: 1px 4px; border-radius: 3px;",...e)};function W(e){let t=s.eventPath;s.asThirdPartySdk&&typeof localStorage!="undefined"&&localStorage.getItem("_edgee")&&(t=t+"?e="+localStorage.getItem("_edgee"));let n=JSON.stringify(e),o={"Content-Type":"application/json"};w()&&(o["Edgee-Debug"]="1"),fetch(t,{method:"POST",headers:o,body:n}).then(c=>{c.status!==200&&c.status!==204?p("Failed to send event to "+s.eventPath+": "+c.status):c.status===200&&c.json().then(r=>{let a=r;if(s.asThirdPartySdk&&typeof localStorage!="undefined"&&(r.e&&localStorage.setItem("_edgee",r.e),r.events&&(a=r.events)),a.length>0)for(let i=0;i<a.length;i++)_(`\u25CB ${a[i].type} event (client):`,a[i])}).catch(r=>{p("Failed to parse response: "+r)})}).catch(c=>{p("Failed to send event to "+s.eventPath+": "+c)})}var m=W;function u(){return q().then(e=>{let t={};e!==null&&(t=JSON.parse(e.textContent)),t.data_collection=t.data_collection||{},t.data_collection.context=t.data_collection.context||{},t.data_collection.events=t.data_collection.events||[],t.data_collection.context.client=t.data_collection.context.client||{};let n=Intl.DateTimeFormat().resolvedOptions().timeZone;n&&(t.data_collection.context.client.timezone=n);let o=window.screen?window.screen.width:0,c=window.screen?window.screen.height:0;o&&c&&(t.data_collection.context.client.screen_width=o,t.data_collection.context.client.screen_height=c);let r=window.devicePixelRatio;r&&(t.data_collection.context.client.screen_density=r);let a=new URLSearchParams(window.location.search);a.has("utm_campaign")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.name=a.get("utm_campaign")),a.has("utm_source")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.source=a.get("utm_source")),a.has("utm_medium")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.medium=a.get("utm_medium")),a.has("utm_term")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.term=a.get("utm_term")),a.has("utm_content")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.content=a.get("utm_content")),a.has("utm_creative_format")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.creative_format=a.get("utm_creative_format")),a.has("utm_marketing_tactic")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.marketing_tactic=a.get("utm_marketing_tactic"));let i;document.querySelector('link[rel="canonical"]')&&document.querySelector('link[rel="canonical"]').getAttribute("href")&&(i=document.querySelector('link[rel="canonical"]').getAttribute("href"),!i.startsWith("https://")&&!i.startsWith("http://")&&!i.startsWith("//")&&(i=window.location.protocol+"//"+window.location.host+i));let f;if(i){f=i.replace(/^https?:\/\//,"");let l=f.split("/")[0];f=f.replace(l,""),f=f.split("?")[0]}if(t.data_collection.context.page=t.data_collection.context.page||{},t.data_collection.context.page.url||(i?t.data_collection.context.page.url=i:t.data_collection.context.page.url=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search),t.data_collection.context.page.path||(f?t.data_collection.context.page.path=f:t.data_collection.context.page.path=window.location.pathname),!t.data_collection.context.page.search&&window.location.search!==""&&(t.data_collection.context.page.search=window.location.search),t.data_collection.context.page.title||(t.data_collection.context.page.title=document.title),!t.data_collection.context.page.keywords){let l=document.querySelector('meta[name="keywords"]');if(l){let x=l.getAttribute("content");t.data_collection.context.page.keywords=x.split(",").map(g=>g.trim())}}return document.referrer&&(t.data_collection.context.page.referrer=document.referrer),window.navigator.userAgentData?window.navigator.userAgentData.getHighEntropyValues(["architecture","bitness","model","platformVersion","fullVersionList"]).then(l=>{if(l.architecture&&(t.data_collection.context.client.user_agent_architecture=l.architecture),l.bitness&&(t.data_collection.context.client.user_agent_bitness=l.bitness),l.model&&(t.data_collection.context.client.user_agent_model=l.model),l.platformVersion&&(t.data_collection.context.client.user_agent_platform=l.platformVersion),l.fullVersionList){let x=l.fullVersionList;if(x.length>0){let g="";x.forEach(b=>{g+=b.brand+";"+b.version+"|"}),g=g.slice(0,-1),t.data_collection.context.client.user_agent_full_version_list=g}}return t}).catch(()=>t):t})}function q(){return new Promise(e=>{function t(){let n=document.getElementById("__EDGEE_DATA_LAYER__");n!==null?e(n):document.readyState==="complete"?e(null):document.onreadystatechange=()=>{document.readyState==="complete"&&t()}}t()})}function F(e){u().then(t=>{t.data_collection.events=[];let n={};if(n.type="page",e.length!==0){let[o,c]=e;typeof o=="string"?n.data=o:typeof o=="object"&&(n.data=d(d({},t.data_collection.context.page),o)),typeof c=="object"&&(n.components=d(d({},t.data_collection.components),c))}t.data_collection.events.push(n),m(t)})}var E=F;function O(e){let t="Event name is required to track an event";if(e.length===0){p(t);return}u().then(n=>{n.data_collection.events=[];let o={};o.type="track",o.data={};let[c,r]=e;if(typeof c=="string")o.data.name=c;else if(typeof c=="object"){if(!c.name){p(t);return}o.data=c}if(c.name===""){p(t);return}typeof r=="object"&&(o.components=d(d({},n.data_collection.components),r)),n.data_collection.events.push(o),m(n)})}var S=O;function R(e){u().then(t=>{t.data_collection.events=[];let n={};if(n.type="user",e.length!==0){let[o,c]=e;typeof o=="string"?n.data.userId=o:typeof o=="object"&&(n.data=d(d({},t.data_collection.context.user),o)),typeof c=="object"&&(n.components=d(d({},t.data_collection.components),c))}t.data_collection.events.push(n),m(t)})}var A=R;function C(){u().then(e=>{if(e.data_collection.events.length===0){let t={};t.type="page",e.data_collection.events.push(t)}m(e)})}var D=C;var h=window.edgee=window.edgee||[];if(!h.load){for(h.load=!0,h.factory=function(o){return function(){let c=Array.prototype.slice.call(arguments);return G(o,c),h}},v=0;v<s.methods.length;v++)y=s.methods[v],h[y]=h.factory(y);let e=document.currentScript,t=e.getAttribute("data-event-path");if(t)_("Event path set to "+t),s.eventPath=t;else{let o=e.src;if(o&&(o.startsWith("http://")||o.startsWith("https://")||o.startsWith("//"))){o=o.replace("https://",""),o=o.replace("http://",""),o=o.replace("^//","");let c=o.split("/")[0];c!==window.location.host&&(s.asThirdPartySdk=!0,s.eventPath=`https://${c}/_edgee/csevent`,_("Edgee SDK used as third party. Event path set to "+s.eventPath))}}let n=e.getAttribute("data-client-side");if(!n||n==="true")D();else if(typeof window._edgee_events=="object"&&window._edgee_events.length>0)for(let o=0;o<window._edgee_events.length;o++)_(`\u25C9 ${window._edgee_events[o].type} event (edge):`,window._edgee_events[o]);window.dispatchEvent(new Event("edgee:loaded"))}var y,v;function G(e,t){e==="page"?E(t):e==="track"?S(t):e==="user"&&A(t)}})();
