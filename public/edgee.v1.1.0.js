(()=>{var j=Object.defineProperty;var v=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var y=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&y(e,n,t[n]);if(v)for(var n of v(t))T.call(t,n)&&y(e,n,t[n]);return e};var I={eventPath:"/_edgee/event",asThirdPartySdk:!1,methods:["user","track","page"]},d=I;var W=e=>{let t=window.location.search;return new URLSearchParams(t).get(e)},h=()=>{let e=W("_edgeedebug");if(e!==null){if(e==="true")return document.cookie="_edgeedebug=true; path=/",!0;if(e==="false")return document.cookie="_edgeedebug=false; path=/",!1}return!!document.cookie.includes("_edgeedebug=true")},u=(...e)=>{typeof e!="object"&&(e=[e]),console&&typeof console.log=="function"&&h()&&console.log("%cEDGEE","display: inline-block; color: #61d2a3; background: #231A26; padding: 1px 4px; border-radius: 3px;",...e)},p=(...e)=>{typeof e!="object"&&(e=[e]),console&&typeof console.error=="function"&&h()&&console.error("%cEDGEE","display: inline-block; color: #CB134A; background: #231A26; padding: 1px 4px; border-radius: 3px;",...e)};function q(e){let t=d.eventPath;d.asThirdPartySdk&&typeof localStorage!="undefined"&&localStorage.getItem("_edgee")&&(t=t+"?e="+localStorage.getItem("_edgee"));let n=JSON.stringify(e),o={"Content-Type":"application/json"};h()&&(o["Edgee-Debug"]="1"),fetch(t,{method:"POST",headers:o,body:n}).then(c=>{c.status!==200&&c.status!==204?p("Failed to send event to "+d.eventPath+": "+c.status):c.status===200&&c.json().then(l=>{let a=l;if(d.asThirdPartySdk&&typeof localStorage!="undefined"&&(l.e&&localStorage.setItem("_edgee",l.e),l.events&&(a=l.events)),a.length>0)for(let i=0;i<a.length;i++)u(`\u25CB ${a[i].type} event (client):`,a[i])}).catch(l=>{p("Failed to parse response: "+l)})}).catch(c=>{p("Failed to send event to "+d.eventPath+": "+c)})}var m=q;function f(){return L().then(e=>{let t={};e!==null&&(t=JSON.parse(e.textContent)),t.data_collection=t.data_collection||{},t.data_collection.context=t.data_collection.context||{},t.data_collection.events=t.data_collection.events||[];let n=Intl.DateTimeFormat().resolvedOptions().timeZone;n&&(t.data_collection.context.client={},t.data_collection.context.client.timezone=n);let o=window.screen?window.screen.width:0,c=window.screen?window.screen.height:0;o&&c&&(t.data_collection.context.client=t.data_collection.context.client||{},t.data_collection.context.client.screen_width=o,t.data_collection.context.client.screen_height=c);let l=window.devicePixelRatio;l&&(t.data_collection.context.client=t.data_collection.context.client||{},t.data_collection.context.client.screen_density=l);let a=new URLSearchParams(window.location.search);a.has("utm_campaign")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.name=a.get("utm_campaign")),a.has("utm_source")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.source=a.get("utm_source")),a.has("utm_medium")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.medium=a.get("utm_medium")),a.has("utm_term")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.term=a.get("utm_term")),a.has("utm_content")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.content=a.get("utm_content")),a.has("utm_creative_format")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.creative_format=a.get("utm_creative_format")),a.has("utm_marketing_tactic")&&(t.data_collection.context.campaign=t.data_collection.context.campaign||{},t.data_collection.context.campaign.marketing_tactic=a.get("utm_marketing_tactic"));let i;document.querySelector('link[rel="canonical"]')&&document.querySelector('link[rel="canonical"]').getAttribute("href")&&(i=document.querySelector('link[rel="canonical"]').getAttribute("href"),!i.startsWith("https://")&&!i.startsWith("http://")&&!i.startsWith("//")&&(i=window.location.protocol+"//"+window.location.host+i));let s;if(i){s=i.replace(/^https?:\/\//,"");let _=s.split("/")[0];s=s.replace(_,""),s=s.split("?")[0]}if(t.data_collection.context.page=t.data_collection.context.page||{},t.data_collection.context.page.url||(i?t.data_collection.context.page.url=i:t.data_collection.context.page.url=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search),t.data_collection.context.page.path||(s?t.data_collection.context.page.path=s:t.data_collection.context.page.path=window.location.pathname),!t.data_collection.context.page.search&&window.location.search!==""&&(t.data_collection.context.page.search=window.location.search),t.data_collection.context.page.title||(t.data_collection.context.page.title=document.title),!t.data_collection.context.page.keywords){let _=document.querySelector('meta[name="keywords"]');if(_){let E=_.getAttribute("content");t.data_collection.context.page.keywords=E.split(",").map(A=>A.trim())}}return document.referrer&&(t.data_collection.context.page.referrer=document.referrer),t})}function L(){return new Promise(e=>{function t(){let n=document.getElementById("__EDGEE_DATA_LAYER__");n!==null?e(n):document.readyState==="complete"?e(null):document.onreadystatechange=()=>{document.readyState==="complete"&&t()}}t()})}function F(e){f().then(t=>{t.data_collection.events=[];let n={};if(n.type="page",e.length!==0){let[o,c]=e;typeof o=="string"?n.data=o:typeof o=="object"&&(n.data=r(r({},t.data_collection.context.page),o)),typeof c=="object"&&(n.components=r(r({},t.data_collection.components),c))}t.data_collection.events.push(n),m(t)})}var b=F;function O(e){let t="Event name is required to track an event";if(e.length===0){p(t);return}f().then(n=>{n.data_collection.events=[];let o={};o.type="track",o.data={};let[c,l]=e;if(typeof c=="string")o.data.name=c;else if(typeof c=="object"){if(!c.name){p(t);return}o.data=c}if(c.name===""){p(t);return}typeof l=="object"&&(o.components=r(r({},n.data_collection.components),l)),n.data_collection.events.push(o),m(n)})}var k=O;function R(e){f().then(t=>{t.data_collection.events=[];let n={};if(n.type="user",e.length!==0){let[o,c]=e;typeof o=="string"?n.data.userId=o:typeof o=="object"&&(n.data=r(r({},t.data_collection.context.user),o)),typeof c=="object"&&(n.components=r(r({},t.data_collection.components),c))}t.data_collection.events.push(n),m(t)})}var P=R;function C(){f().then(e=>{if(e.data_collection.events.length===0){let t={};t.type="page",e.data_collection.events.push(t)}m(e)})}var S=C;var g=window.edgee=window.edgee||[];if(!g.load){for(g.load=!0,g.factory=function(o){return function(){let c=Array.prototype.slice.call(arguments);return G(o,c),g}},x=0;x<d.methods.length;x++)w=d.methods[x],g[w]=g.factory(w);let e=document.currentScript,t=e.getAttribute("data-event-path");if(t)u("Event path set to "+t),d.eventPath=t;else{d.asThirdPartySdk=!0;let o=e.src;if(o&&(o.startsWith("http://")||o.startsWith("https://")||o.startsWith("//"))){o=o.replace("https://",""),o=o.replace("http://",""),o=o.replace("^//","");let c=o.split("/")[0];d.eventPath=`https://${c}/_edgee/csevent`,u("Edgee SDK used as third party. Event path set to "+d.eventPath)}}let n=e.getAttribute("data-client-side");if(!n||n==="true")S();else if(typeof window._edgee_events=="object"&&window._edgee_events.length>0)for(let o=0;o<window._edgee_events.length;o++)u(`\u25C9 ${window._edgee_events[o].type} event (edge):`,window._edgee_events[o]);window.dispatchEvent(new Event("edgee:loaded"))}var w,x;function G(e,t){e==="page"?b(t):e==="track"?k(t):e==="user"&&P(t)}})();
